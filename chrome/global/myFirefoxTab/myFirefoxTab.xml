<?xml version="1.0"?>
<?xul-overlay href="chrome://global/content/editMenuOverlay.xul"?>
<?xul-overlay href="chrome://browser/content/baseMenuOverlay.xul"?>
<?xul-overlay href="chrome://browser/content/places/placesOverlay.xul"?>
<!DOCTYPE bindings [
<!ENTITY % browserDTD SYSTEM "chrome://browser/locale/browser.dtd" >
%browserDTD;
<!ENTITY % baseMenuOverlayDTD SYSTEM "chrome://browser/locale/baseMenuOverlay.dtd" >
%baseMenuOverlayDTD;
<!ENTITY % tabBrowserDTD SYSTEM "chrome://browser/locale/tabbrowser.dtd" >
%tabBrowserDTD;
<!ENTITY % globalDTD SYSTEM "chrome://global/locale/global.dtd">
%globalDTD;
<!ENTITY % brandDTD SYSTEM "chrome://branding/locale/brand.dtd" >
%brandDTD;
]>

<bindings id="myFireFoxTab-bindings"
	xmlns="http://www.mozilla.org/xbl"
	xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
	xmlns:xbl="http://www.mozilla.org/xbl">
 <binding id="tabbrowser-tab" display="xul:hbox" extends="chrome://browser/content/tabbrowser.xml#tabbrowser-tab">
	<resources>
		<stylesheet src="chrome://global/skin/browser.css"/>
	</resources> 
	<content context="tabContextMenu" chromedir="&locale.dir;"
		closetabtext="&closeTab.label;">
		<xul:image class="myTab-left-corner"/>
		<xul:hbox class="tab-image-left"/>
		<xul:hbox flex="1" class="tab-image-middle" align="center" >
			<xul:stack class="tab-icon" />		
			<xul:image class="tab-throbber" xbl:inherits="fadein,pinned,busy,progress,selected" role="presentation" layer="true" fadein="true" />
			<xul:image xbl:inherits="validate,src=image,fadein,pinned,selected" class="tab-icon-image" anonid="tab-icon" role="presentation" />
			<xul:image class="tab-icon-overlay" xbl:inherits="busy,soundplaying,soundplaying-scheduledremoval,pinned,muted,blocked,selected" anonid="overlay-icon" role="presentation" />				
			<xul:label flex="1" xbl:inherits="value=label,crop,accesskey" class="tab-text"/>				
			<xul:image class="tab-icon-sound" xbl:inherits="soundplaying,soundplaying-scheduledremoval,pinned,muted,blocked,selected" role="presentation" anonid="soundplaying-icon" />
		</xul:hbox>
		<xul:toolbarbutton anonid="close-button" tabindex="-1" class="tab-close-button close-icon" xbl:inherits="fadein,pinned,selected" fadein="true" />
		<xul:hbox class="tab-image-right"/>
		<xul:image class="myTab-right-corner"/>
	</content>
 </binding>
 
 <binding id="home-button" extends="chrome://global/content/bindings/toolbarbutton.xml#toolbarbutton">
	<content type="menu-button">
		<children />
		<xul:menupopup position="after_end" 
			onpopuphidden="if (event.target == this) 
				while(this.firstChild.id != 'homepagesSeparator') this.removeChild(this.firstChild);"
			oncommand="event.stopPropagation();"
			onpopupshowing="
				if (event.target != this) return;
				var links = gPrefService.getCharPref('browser.startup.homepage');
				var str = links.split('|');
				var i = 0;
				var separator = this.firstChild;
				while (str[i] != null) {
					var menuitem = document.createElement('menuitem');
					menuitem.setAttribute('label', str[i]);
					menuitem.className = 'menuitem-iconic bookmark-item';
					menuitem.setAttribute('oncommand', 'loadURI(&quot;' + str[i] + '&quot;);');
					this.insertBefore(menuitem, separator);
					i++;
				}
				this.lastChild.hidden = i == 1 &amp;&amp; str[0] == 'about:blank';
			">

			<xul:menuseparator id="homepagesSeparator"/>
			<xul:popup onpopupshowing="
				if (this.result) gPrefService.setCharPref('browser.startup.homepage', this.result);"/>
			<xul:menuitem id="myAddChangeHomePage" label="Add or Change Home Page ..."
				image="chrome://global/skin/CuteMenus/home.png"
				oncommand="
					var browsers = document.getElementById('content').browsers;
					var homePage = document.getElementById('browser.startup.homepage');
					var uriList = browsers[0].currentURI.spec;

					for (var i = 1; i &lt; browsers.length; i++)
					uriList += '|' + browsers[i].currentURI.spec;

					openDialog('chrome://global/skin/myFirefoxTab/myHomePageDialog.xul', null,'chrome,centerscreen,dialog,modal',
						browsers[selectedIndex].currentURI.spec,
						homePage.value,
						homePage.defaultValue,
						uriList,
						this.previousSibling);
				"/>
			<xul:menu id="myRemoveMenu" label="Remove" accesskey="r">
				<xul:menupopup onpopupshowing="
					var separator = this.firstChild;
					for (var item = this.parentNode.parentNode.firstChild;
						item.id != 'homepagesSeparator'; item = item.nextSibling) {
						var newitem = this.insertBefore(item.cloneNode(true), separator);
						newitem.removeAttribute('oncommand');
						newitem.addEventListener('command', function() {
							var string;
							if (this.nextSibling.id == 'removeHomepagesSeparator' &amp;&amp; !this.previousSibling)
								string = 'about:blank';
							else {
								string = gPrefService.getCharPref('browser.startup.homepage').replace(
									this.previousSibling ? '|' + this.label : this.label + '|', '');
							}
							gPrefService.setCharPref('browser.startup.homepage', string);
						}, false);
					}
					"
					onpopuphidden=" while (this.firstChild.id != 'removeHomepagesSeparator')
						this.removeChild(this.firstChild); ">
					<xul:menuseparator id="removeHomepagesSeparator"/>
					<xul:menuitem id="myRemoveAll" label="Remove All" accesskey="a"
						oncommand="gPrefService.setCharPref('browser.startup.homepage', 'about:blank')"/>
				</xul:menupopup>
			</xul:menu>
		</xul:menupopup>
	</content>
 </binding>
 
 	<binding id="tab-toolbars" extends="chrome://global/content/bindings/toolbar.xml#toolbar">
    <content>  
		<children />
		<xul:menubar id="myTab-Right-toolbar" context="toolbar-context-menu">    
            <xul:toolbarbutton id="myPageInfo" 
						type="menu" labelX="Page" 
						class="myTabToolBarMenuButton">
				<xul:menupopup id="appmenu-popup-1"  position="after_end" ></xul:menupopup>
            </xul:toolbarbutton> 
            <xul:toolbarbutton id="myTools" 
						type="menu" labelX="&toolsMenu.label;"
						class="myTabToolBarMenuButton">
				<xul:menupopup id="appmenu-popup-2"  position="after_end" ></xul:menupopup>
            </xul:toolbarbutton> 
            <xul:toolbarbutton id="myHelp" 
						type="menu" 
						class="myTabToolBarMenuButton" />

       </xul:menubar>
	</content>
 </binding>

  <binding id="tabbrowser-tabs" extends="chrome://browser/content/tabbrowser.xml#tabbrowser-tabs">
	<resources>
		<stylesheet src="chrome://global/skin/browser.css"/>
	</resources>  
    <content>
      <xul:stack flex="1" class="tabs-stack">
        <xul:vbox>
          <xul:spacer id="extTabMixPopup" flex="1"/>
          <xul:hbox class="tabs-bottom" align="center"/>
        </xul:vbox>
        <xul:hbox xbl:inherits="overflow" class="tabs-container">
		
		
				<xul:toolbox id="myTabBox-Left-toolbox" palette="BrowserToolbarPalette"  mode="icons" context="toolbar-context-menu" >	
        <xul:toolbar id="myTab-Left-toolbar"  anonymous="true" fullscreentoolbar="true"
        	context="toolbar-context-menu" customizable="true" mode="icons" iconsize="small">
        	<xul:toolbarbutton id="myTabHistory-button"   hidden="true"
						   observes="viewHistorySidebar" />  
        	<xul:toolbarbutton id="myTabBookmarks-button-hide"   hidden="true"
						   observes="viewBookmarksSidebar" />  	
      	     
        	<xul:hbox id="myTab-left-group">
				<xul:toolbarbutton id="myTabBookmarks-Menu" class="myTabToolBarButton"
							type="menu"
							tooltiptext="s">
					<xul:menupopup style="padding:1px">
						<xul:tabbox width="290" max-width="290" height="500" 
									style="background:#f4f6fe;border:0;margin:0 -1px 3px 0">
							<xul:tabs  orient="horizontal" width="290"  
								style="background:#f4f6fe; padding-bottom:1px">
								<xul:tab id="AAA" class="mySideBarHeaderButton"
									label="&bookmarksMenu.label;"
									tooltiptext="&bookmarksMenu.label;"
									linkedpanel="aaa"/>
								<xul:tab id="BBB" class="mySideBarHeaderButton"
									tooltiptext="&historyMenu.label;" 
									label="&historyMenu.label;" 
									linkedpanel="bbb"/>
								<xul:spacer flex="1"/>
								<xul:stack pack="end"  >
									<xul:button id="myHistory-sidebar" 
										class="myShowSideBar"
										tooltiptext="historyShowSidebarCmd.label;"
										observes="viewBookmarksSidebar" />
									<xul:button id="myBookmarks-sidebar" 
										class="myShowSideBar"								
										tooltiptext="historyShowSidebarCmd.label;"
										observes="viewHistorySidebar"/>
								</xul:stack>
							</xul:tabs>
							<xul:tabpanels id="myTabPopBrowser" flex="1" width="290"   >
								<xul:tabpanel id="aaa"  >
									<xul:browser   autoscroll="false" flex="1" 
									   style="border:1px solid #696969; margin-top:-1px ;"
									   src="chrome://browser/content/bookmarks/bookmarksPanel.xul"/>
								</xul:tabpanel>
								<xul:tabpanel id="bbb">
									<xul:browser autoscroll="false" flex="1"
									   style="border:1px solid #696969; margin-top:-1px ;"	
									   src="chrome://browser/content/history/history-panel.xul"/>
								</xul:tabpanel>
								<xul:tabpanel id="ccc">
									<xul:browser autoscroll="false" flex="1"
									   style="border:1px solid #696969; margin-top:-1px ;"	
									   src="chrome://ybookmarks/content/ybsidebar.xul"/>
								</xul:tabpanel>	
							</xul:tabpanels>
						</xul:tabbox>
					</xul:menupopup>
				</xul:toolbarbutton>

				<xul:toolbarbutton id="myAddBookMark-button"
						class="myTabToolBarButton"
						type="menu" 
						   label="s"
						   tooltiptext="s" >
							<xul:menupopup  position="after_start" >
								<xul:menuitem key="addBookmarkAsKb"
										  label="&bookmarkThisPageCmd.label;"
										  command="Browser:AddBookmarkAs"/>
										  
								<xul:menuitem id="bookmarkAllCmd"
										  key="bookmarkAllTabsKb"
										  label="&bookmarkAllTabs.label;"
										  command="Browser:BookmarkAllTabs"/>
							 </xul:menupopup>
						</xul:toolbarbutton>
			</xul:hbox>
			<xul:label value="" id="favorites-center-label" />
        </xul:toolbar >
	  </xul:toolbox>    
		
		
			<xul:toolbarbutton id="myShowCaseButton" anonid="alltabs-button" type="menu"
				tooltiptext="Firefox ShowCase">
				<xul:menupopup class="tabs-alltabs-popup" id="alltabs-popup" position="after_start"/>
			</xul:toolbarbutton>				
				
			<xul:stack class="myTabs-alltabs-box" align="center" pack="end" chromedir="&locale.dir;">
				<xul:hbox flex="1" class="tabs-alltabs-box" anonid="alltabs-box"/>
				<xul:hbox flex="1" class="tabs-alltabs-box-animate" anonid="alltabs-box-animate"/>
				<xul:toolbarbutton class="tabs-alltabs-button" type="menu"  anonid="alltabs-button">
					<xul:menupopup class="tabs-alltabs-popup" id="alltabs-popup" position="after_start"/>
				</xul:toolbarbutton>
			</xul:stack>
          <xul:arrowscrollbox anonid="arrowscrollbox" orient="horizontal" flex="1" clicktoscroll="true" 
                style="min-width: 1px;"	class="tabbrowser-arrowscrollbox">
            <children includes="tab"/>
            <children/>
            <xul:toolbarbutton class="tabs-newtab-button" command="cmd_newNavigatorTab" chromedir="&locale.dir;"
                tooltiptext="&newTabButton.tooltip;"/>
            <xul:hbox class="myTabBarSpace" width="3" style="margin-left:-3px ;"/>
          </xul:arrowscrollbox>

      
      </xul:hbox>
        </xul:stack>
    </content>
 </binding>
 
  <binding id="myTabpanels" extends="chrome://global/content/bindings/tabbox.xml#tabpanels"> 
    <content onmouseover="
	if(!gBrowser.getAttribute('myFirefoxLoad')){
		gBrowser.setAttribute('myFirefoxLoad','true');
		document.loadOverlay('chrome://global/skin/myFirefoxTab/myLoadJs.xul', null);
	}
	this.isFirstRun=true ;this.removeAttribute('onmouseover');this.onmouseover=null;">
		<children/>				   
    </content>   
 </binding>
</bindings>